{% extends 'base.html' %}
{% block content %}
<div id="wraper"><div id="headerdiv"><h1>Hi {{name}} {{lastname}}, Welcome to SecurCalc!</h1>
<p>You may choose any of the arithmetic operations listed below.</p></div>

<div class="grid-container">
  <div class="grid-item"><button type="button" onclick="openPopup()">To show the multiplaction table click here.</button></div>
  <div class="grid-item"><button type="button" onclick="openPopup2()">To sum numbers, click here and enter your values.</button></div>
  <div class="grid-item"><button type="button" onclick="openPopup3()">Click here to compute the percentage of a given number</button></div>
  <div class="grid-item"><button type="button" onclick="openPopup4()">Click here to compute the average of your values.</button></div>
  <div class="grid-item"><button type="button" onclick="openPopup5()">Click to compute the division remainder of two numbers.</button></div>
  <div class="grid-item"><button type="button" onclick="openPopup6()">Click to specify the min and max for a group of numbers.</div>
</div>
</div>
 <div id="popup" class="popup-overlay">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup()">&times;</span>
      <h2>Multiplication Table Generator</h2>
      <p>Input a number to see its multiplication table</p>
      <form action="{{url_for('views.multiplactionTable')}}" method="POST">
  <div class="form-group">
    <input type="number" class="form-control" id="exampleInput" name="numberInput" placeholder="Enter a number" required>
  </div>
  <button type="submit" class="btn btn-success">Submit</button>
</form>
    </div>
  </div>

  <div id="popup2" class="popup-overlay">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup2()">&times;</span>
      <h2>Summation</h2>
      <p>Add numbers to calculate their sum.</p>
       <form method="POST" id="summationForm">
      <div class="mb-3">
        <input type="number" step="any" id="sumInput" class="form-control" name="number" placeholder="Enter a number">
      </div>

      <div class="d-flex gap-2">
        <button type="button" name="action" id="addnumber" value="add" class="btn btn-success">Add</button>
        <button type="submit" name="action" id="showResult" value="result" class="btn btn-primary">Show Result</button>
      </div>
    </form>
    </div>
  </div>

   <div id="popup3" class="popup-overlay">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup3()">&times;</span>
      <h2>Percentage Calculator</h2>
      <p></p>
      <form method="POST" action="{{url_for('views.getPrecentage')}}">
  <div class="mb-3">
    <label for="input1" class="form-label">X %</label>
    <input type="number" step="any" class="form-control" id="input1" name="input1" placeholder="Enter percentage" required>
  </div>

  <div class="mb-3">
    <label for="input2" class="form-label">Of Y</label>
    <input type="number" step="any" class="form-control" id="input2" name="input2" placeholder="Enter base value" required>
  </div>

  <div class="d-grid">
    <button type="submit" class="btn btn-primary">Submit</button>
  </div>
</form>

  </div>
    </div>
  </div>

  <div id="popup4" class="popup-overlay">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup4()">&times;</span>
      <h2>Average Calculator</h2>
      <p>Enter more than one numbers:</p>
       <form method="POST" id="averageForm">
      <div class="mb-3">
        <input type="number" id="averageInput" step="any" class="form-control" name="number" placeholder="Enter a number">
      </div>

      <div class="d-flex gap-2">
        <button type="button" id="addAverageNumsbtn" name="action" value="add" class="btn btn-success">Add</button>
        <button type="submit" name="action" value="result" class="btn btn-primary">Show average</button>
      </div>
    </form>

    </div>
  </div>

  <div id="popup5" class="popup-overlay">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup5()">&times;</span>
      <h2>Remainder Calculator</h2>
      <p></p>
      <form method="POST" action="/submit">
  <div class="mb-3">
    <label for="input1" class="form-label">Number</label>
    <input type="number" step="any" class="form-control" id="input1" name="input1" placeholder="Enter a number" required>
  </div>

  <div class="mb-3">
    <label for="input2" class="form-label">Divisor</label>
    <input type="number" step="any" class="form-control" id="input2" name="input2" placeholder="Enter a divisor" required>
  </div>

  <div class="d-grid">
    <button type="submit" class="btn btn-primary">Submit</button>
  </div>
</form>

  </div>
    </div>
  </div>

  <div id="popup6" class="popup-overlay">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup6()">&times;</span>
      <h2>Min and Max Calculator</h2>
      <p> Enter more than two numbers:</p>
      <form method="POST" action="/calculate">
      <div class="mb-3">
        <input type="number" step="any" class="form-control" name="number" placeholder="Enter a number" required>
      </div>

      <div class="d-flex gap-2">
        <button type="submit" name="action" value="add" class="btn btn-success">Add</button>
        <button type="submit" name="action" value="result" class="btn btn-primary">Show Result</button>
      </div>
    </form>
  </div>
    </div>
  </div>
  
  <script>
    function openPopup() {
      document.getElementById('popup').style.display = 'block';
    }
     function openPopup2() {
      document.getElementById('popup2').style.display = 'block';
    }

    function closePopup() {
      document.getElementById('popup').style.display = 'none';
    }
    function closePopup2() {
      document.getElementById('popup2').style.display = 'none';
    }
    function openPopup3() {
      document.getElementById('popup3').style.display = 'block';
    }
    
    function closePopup3() {
      document.getElementById('popup3').style.display = 'none';
    }
     function openPopup4() {
      document.getElementById('popup4').style.display = 'block';
    }
     function closePopup4() {
      document.getElementById('popup4').style.display = 'none';
    }
    function openPopup5() {
      document.getElementById('popup5').style.display = 'block';
    }
    function closePopup5() {
      document.getElementById('popup5').style.display = 'none';
    }
     function openPopup6() {
      document.getElementById('popup6').style.display = 'block';
    }
    function closePopup6() {
      document.getElementById('popup6').style.display = 'none';
    }
    /*   Onclick function for getting multiple user entry from a text input and sen them to python module: */
    document.getElementById('addnumber').addEventListener('click', function() {
  const numberInput = document.getElementById('sumInput');
  const number = parseInt(numberInput.value, 10);
  if (!isNaN(number)) {
    // Retrieve existing numbers from localStorage or initialize an empty array
    let numbers = JSON.parse(localStorage.getItem('numbers')) || [];
    numbers.push(number);
    // Store the updated list back into localStorage
    localStorage.setItem('numbers', JSON.stringify(numbers));
    numberInput.value = ''; // Clear input field
  } else {
    alert('Please enter a valid number.');
  }
});

document.getElementById('summationForm').addEventListener('submit', function(event) {
  event.preventDefault();
  const numbers = JSON.parse(localStorage.getItem('numbers')) || [];
  const routeUrl = "{{ url_for('views.gettingNumbers') }}";

  fetch(routeUrl, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ numbers: numbers }),
  })
  .then(response => response.json())
  .then(data => {
    alert('Numbers submitted successfully!');
    // Optionally, clear the stored numbers after submission
    localStorage.removeItem('numbers');
     window.location.href = "{{ url_for('views.result') }}?total=" + data.total;
  })
  .catch(error => {
    console.error('Error:', error);
  });
});


// getting numbers and sending them for average calcuating:


document.getElementById('addAverageNumsbtn').addEventListener('click', function() {
  const numberInput = document.getElementById('averageInput');
  const number = parseInt(numberInput.value, 10);
  if (!isNaN(number)) {
    // Retrieve existing numbers from localStorage or initialize an empty array
    let numbers = JSON.parse(localStorage.getItem('numbers')) || [];
    numbers.push(number);
    // Store the updated list back into localStorage
    localStorage.setItem('numbers', JSON.stringify(numbers));
    numberInput.value = ''; // Clear input field
  } else {
    alert('Please enter a valid number.');
  }
});

document.getElementById('averageForm').addEventListener('submit', function(event) {
  event.preventDefault();
  const numbers = JSON.parse(localStorage.getItem('numbers')) || [];
  const routeUrl = "{{ url_for('views.getAverage') }}";

  fetch(routeUrl, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ numbers: numbers }),
  })
  .then(response => response.json())
  .then(data => {
    alert('Numbers submitted successfully!');
    // Optionally, clear the stored numbers after submission
    localStorage.removeItem('numbers');
     window.location.href = "{{ url_for('views.avrageResult') }}?average=" + data.average;
  })
  .catch(error => {
    console.error('Error:', error);
  });
});
    

  </script>

{% endblock %}